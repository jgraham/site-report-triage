<!doctype html>
<meta charset="utf-8">
<link rel="stylesheet" href="style.css">
<script src="triage-report.js" type="module"></script>
<header>
  <h1>Triage Site Report</h1>
</header>
<section id="triage-initial">
  <p>Not a Site Report bug
</section>
<section id="triage-form" hidden>
  <div class="form">
    <p class="label">Current Ranking</p>
    <div>
      <label for="severity-initial">Severity:</label>
      <output id="severity-initial"></output>

      <label for="priority-initial">Priority:</label>
      <output id="priority-initial"></output>
    </div>

    <p class="label"><label for="url">URL</label></p>
    <ul class="input-list">
      <li><input id="url" pattern="[^\s]+">
      <li>
        <div>
          <label for="rank">Site Rank: </label><output id="rank"></output>
          <output id="rank-domain" hidden></output>
        </div>
    </ul>

    <p class="label">Platform</p>
    <ul id="platform" class="input-list-inline">
      <li><input type=checkbox checked id="platform-windows" value="0.7"><label for=platform-windows>Windows</label>
      <li><input type=checkbox checked id="platform-mac" value="0.2"><label for=platform-mac>macOS</label>
      <li><input type=checkbox checked id="platform-linux" value="0.1"><label for=platform-linux>Linux</label>
      <li><input type=checkbox checked id="platform-android" value="1"><label for=platform-android>Android</label>
    </ul>

    <label for="impact">Impact</label>
    <select id="impact">
      <option id=impact-site-broken value=100>Site broken
      <hr>
      <option id=impact-blocked value=100>Unsupported / Blocked
      <option id=impact-unsupported-warning value=20>Unsupported warning
      <hr>
      <option id=impact-workflow-broken value=60>Workflow broken
      <option id=impact-feature-broken value=30>Feature broken / missing
      <option id=impact-feature-broken-minor value=10>Minor broken / missing feature
      <hr>
      <option id=impact-annoyance value=20>Notable annoyance
      <option id=impact-annoyance-minor value=5>Minor annoyance
      <hr>
      <option id=impact-content-missing value=30>Content missing
      <option id=impact-significant-visual value=20>Significant visual
      <option id=impact-minor-visual value=1>Minor visual
      <hr>
      <option id=impact-unusable-performance value=100>Performance unusable
      <option id=impact-noticable-performance value=30>Noticable jank
      <option id=impact-minor-performance value=10>Minor performance problem
    </select>

    <label for="configuration">Configuration</label>
    <select id="configuration">
      <option id=configuration-general value=1>General
      <option id=configuration-common value=0.5>Specific but common
      <option id=configuration-rare value=0.3>Rare
    </select>

    <label for="affects">Affects users</label>
    <select id="affects">
      <option id=affects-all value=1>All
      <option id=affects-some value=0.3>Some
      <option id=affects-few value=0.1>Few
    </select>
  </div>


  <h2>Diagnosis Status</h2>
  <div class="form">
    <label for="status">Status</label>
    <ul class="input-list-inline">
      <li>
        <select id="status">
          <option id="status-needs-diagnosis" value="webcompat:needs-diagnosis">Needs Diagnosis
          <option id="status-platform-bug" value="webcompat:platform-bug">Platform bug
          <option id="status-sitebug" value="">Site bug
        </select>
      <li>
        <input type="checkbox" id="regression" value="regression">
        <label for="regression">Regression</label>
    </ul>

    <label for="sitepatch">Intervention</label>
    <select id="sitepatch">
      <option id="sitepatch-none" value="">None
      <option id="sitepatch-needs-sitepatch" value="webcompat:needs-sitepatch">Needs Sitepatch
      <option id="sitepatch-applied" value="webcompat:sitepatch-applied">Sitepatch Applied
        <!-- TODO field to record site patch bug -->
    </select>

    <label for="outreach">Outreach</label>
    <select id="outreach">
      <option id="outreach-none" value="">None
      <option id="outreach-needs-contact" value="webcompat:needs-contact">Needs Contact
      <option id="outreach-contact-ready" value="webcompat:contact-ready">Have Contact
      <option id="outreach-sitewait" value="webcompat:site-wait">Waiting for Response
    </select>
  </div>

  </div>

  <h2>Diagnosis Priority</h2>
  <div class="form">
    <p class="label">Bug Ranking</p>
    <ul class="input-list-inline">
      <li><label for="severity">Severity:</label>
        <select id="severity">
          <option>--</option>
          <option>S1</option>
          <option>S2</option>
          <option>S3</option>
          <option>S4</option>
          <option>N/A</option>
        </select>

      <li><label for="priority">Priority:</label>
        <select id="priority">
          <option>--</option>
          <option>P1</option>
          <option>P2</option>
          <option>P3</option>
          <option>P4</option>
          <option>P5</option>
        </select>

      <li><label for="score">Score:</label>
        <output id="score"></output>
    </ul>
  </div>

  <div class="actions">
    <p><a target="_blank" href="https://docs.google.com/document/d/1RFoVLiTGXQIbe3XZlyAkczmqlVI4NGc8TEIHdKB7-DM/edit#heading=h.85wx30ovvpn1">Triage Help</a></p>
    <button id="reset-triage-form">Reset</button>
    <button class="primary" id="update-bug">Update Bug</button>
  </div>
</section>

<section id="error" hidden>
<p id="error-message">Unknown error</p>
</section>
