<!doctype html>
<meta charset="utf-8">
<link rel="stylesheet" href="style.css">
<script src="triage-report.js" type="module"></script>
<header>
  <h1>Triage Site Report</h1>
  <select id="section-chooser">
    <option value="triage-form">Triage
    <option value="outreach-form">Outreach
    <option value="platform-form">Platform
  </select>
</header>
<section id="triage-initial">
  <p>Not a Site Report bug
</section>
<section id="triage-form" hidden>
  <div class="form">
    <p class="label">Current Ranking</p>
    <div>
      <label for="severity-initial">Severity:</label>
      <output id="severity-initial"></output>
      <label for="priority-initial">Priority:</label>
      <output id="priority-initial"></output>
    </div>

    <p class="label"><label for="url">URL</label></p>
    <ul class="input-list">
      <li>
        <ul class="input-list-inline">
          <li><input id="url" pattern="[^\s]+">
          <li><label for="login">Login</label>
            <select id="login">
              <option data-state=none>None
              <option data-state=needs-login data-keyword="webcompat:needs-login">Needs Login
              <option data-state=have-login data-keyword="webcompat:have-login">Have Login
            </select>
        </ul>

      <li>
        <div>
          <label for="rank">Site Rank: </label><output id="rank"></output>
        </div>
    </ul>

    <p class="label">Platform</p>
    <ul id="platforms" class="input-list-inline" data-name="platform">
      <li><label><input type=checkbox checked name="windows" value="0.7">Windows</label>
      <li><label><input type=checkbox checked name="mac" value="0.2">macOS</label>
      <li><label><input type=checkbox checked name="linux" value="0.1">Linux</label>
      <li><label><input type=checkbox checked name="android" value="1">Android</label>
    </ul>

    <label for="impact">Impact</label>
    <select id="impact">
      <option data-state=site-broken value=100>Site broken
      <hr>
      <option data-state=blocked value=100>Unsupported / Blocked
      <option data-state=unsupported-feature value=80>Unsupported feature
      <option data-state=unsupported-warning value=20>Unsupported warning
      <hr>
      <option data-state=workflow-broken value=80>Workflow broken
      <option data-state=feature-broken value=30>Feature broken / missing
      <option data-state=feature-broken-minor value=10>Minor broken / missing feature
      <hr>
      <option data-state=annoyance value=20>Notable annoyance
      <option data-state=annoyance-minor value=5>Minor annoyance
      <hr>
      <option data-state=content-missing value=30>Content missing
      <option data-state=significant-visual value=20>Significant visual
      <option data-state=minor-visual value=1>Minor visual
      <hr>
      <option data-state=performance value="performance">Performance
    </select>

    <label for="configuration">Configuration</label>
    <select id="configuration">
      <option data-state=general value=1>General
      <option data-state=common value=0.5>Specific but common
      <option data-state=rare value=0.3>Rare
    </select>

    <label for="affects">Affects users</label>
    <select id="affects">
      <option data-state=all value=1>All
      <option data-state=some value=0.3>Some
      <option data-state=few value=0.1>Few
    </select>

    <label for="branch">Release Branch</label>
    <select id="branch">
      <option data-state=release value=1>Release (or Beta / Nightly)
      <option data-state=esr value=0.5>ESR Only
    </select>
  </div>

  <section id="performance" hidden>
    <h2>Performance Impact</h2>
    <div class="form performance">
      <label for="performance-impact-browser">Browser Impact</label>
      <select id="performance-impact-browser" data-serialize-options="no-default">
        <option data-state=none value=0>None
          <hr>
        <option data-state=unusable value=300 data-keyword="perf:responsiveness">Unusable
        <option data-state=jank value=150 data-keyword="perf:responsiveness">Noticable Jank
          <hr>
        <option data-state=startup-delay value=150 data-keyword="perf:pageload">Noticable Startup Delay
        <option data-state=shutdown-delay value=60>Noticable Shutdown Delay
      </select>
      <label for="performance-impact-content">Content Impact</label>
      <select id="performance-impact-content" data-serialize-options="no-default">
        <option data-state=none value=0>None
        <option data-state=unusable value=100  data-keyword="perf:responsiveness">Site unusable
        <option data-state=jank value=60 data-keyword="perf:responsiveness">Noticable Jank
      </select>
      <label for="performance-impact-page-load">Page Load Impact</label>
      <select id="performance-impact-page-load" data-serialize-options="no-default">
        <option data-state=none value=0>None
        <option data-state=severe value=80>Severe
        <option data-state=noticable value=40>Noticable
      </select>
      <label for="performance-impact-resources">Resource Impact</label>
      <select id="performance-impact-resources" data-serialize-options="no-default">
        <option data-state=none value=0>None
        <option data-state=severe value=60>Severe
        <option data-state=some value=12>Some
      </select>
      <label for="performance-impact-animation">Animation Impact</label>
      <select id="performance-impact-animation" data-serialize-options="no-default">
        <option data-state=none value=0>None
        <option data-state=some value=30 data-keyword="perf:animation">Affects Smoothness
      </select>
    </div>
  </section>

  <h2>Diagnosis Status</h2>
  <div class="form">
    <label for="status">Status</label>
    <ul class="input-list-inline">
      <li>
        <select id="status" data-serialize-options="no-default">
          <option data-state=needs-diagnosis data-keyword="webcompat:needs-diagnosis">Needs Diagnosis
          <option data-state=platform-bug data-keyword="webcompat:platform-bug">Platform bug
          <option data-state=sitebug>Site bug
        </select>
      <li>
        <input type="checkbox" id="regression" data-keyword="regression">
        <label for="regression">Regression</label>
    </ul>

    <label for="sitepatch">Intervention</label>
    <select id="sitepatch" data-serialize-options="no-default">
      <option data-state=none value="1">None
      <option data-state=needs-sitepatch data-keyword="webcompat:needs-sitepatch" value="1">Needs Sitepatch
      <option data-state=applied data-keyword="webcompat:sitepatch-applied" value="0.1">Sitepatch Applied
        <!-- TODO field to record site patch bug -->
    </select>

    <label for="outreach">Outreach</label>
    <select id="outreach" data-serialize-options="no-default">
      <option data-state=none>None
      <option data-state=needs-contact data-keyword="webcompat:needs-contact">Needs Contact
      <option data-state=contact-ready data-keyword="webcompat:contact-ready">Have Contact
      <option data-state=contact-in-progress data-keyword="webcompat:contact-in-progress">Contact in Progress
      <option data-state=contact-complete data-keyword="webcompat:contact-complete">Contact Complete
    </select>

    <label for="diagnosis-team">Diagnosis Team</label>
    <select id="diagnosis-team" data-serialize-options="no-default">
      <option data-state=none>None
      <option data-state=webcompat>Web Compat
      <option data-state=a11y>Accessibility
      <option data-state=android>Android
      <option data-state=apz>APZ
      <option data-state=dom>DOM
      <option data-state=dom-storage>DOM Storage and Workers
      <option data-state=graphics>Graphics
      <option data-state=japan>Japan
      <option data-state=javascript>Javascript
      <option data-state=layout>Layout
      <option data-state=media>Media
      <option data-state=networking>Networking
      <option data-state=performance>Performance
      <option data-state=privacy>Privacy
      <option data-state=security>Security
      <option data-state=video-conferencing>Video Conferencing
    </select>
  </div>

  </div>

  <h2>Diagnosis Priority</h2>
  <div class="form">
    <p class="label">Bug Ranking</p>
    <ul class="input-list-inline">
      <li><label for="severity">Severity:</label>
        <select id="severity">
          <option>--</option>
          <option>S1</option>
          <option>S2</option>
          <option>S3</option>
          <option>S4</option>
          <option>N/A</option>
        </select>

      <li><label for="priority">Priority:</label>
        <select id="priority">
          <option>--</option>
          <option>P1</option>
          <option>P2</option>
          <option>P3</option>
          <option>P4</option>
          <option>P5</option>
        </select>

      <li id="webcompat-priority-control"><label for="webcompat-priority">WebCompat Priority:</label>
        <select id="webcompat-priority">
          <option>---</option>
          <option>?</option>
          <option>-</option>
          <option>P1</option>
          <option>P2</option>
          <option>P3</option>
          <option>revisit</option>
        </select>

      <li id="performance-impact-control"><label for="performance-impact">Performance Impact:</label>
        <select id="performance-impact">
          <option>---</option>
          <option>high</option>
          <option>medium</option>
          <option>low</option>
        </select>

      <li><label for="user-impact-score">Score:</label>
        <output id="user-impact-score"></output>
    </ul>
  </div>

  <div class="actions">
    <p><a target="_blank" href="https://docs.google.com/document/d/1RFoVLiTGXQIbe3XZlyAkczmqlVI4NGc8TEIHdKB7-DM/edit#heading=h.85wx30ovvpn1">Triage Help</a></p>
    <button id="reset-triage-form">Reset</button>
    <button class="primary" id="update-bug">Update Bug</button>
  </div>
</section>

<section id="outreach-form" hidden>
  <div class="form">
    <label for="outreach-status">Outreach Status</label>
    <select id="outreach-status" data-serialize-options="no-default">
      <option data-state=none>None
      <option data-state=needs-contact data-keyword="webcompat:needs-contact">Needs Contact
      <option data-state=contact-ready data-keyword="webcompat:contact-ready">Have Contact
      <option data-state=contact-in-progress data-keyword="webcompat:contact-in-progress">Contact in Progress
      <option data-state=contact-complete data-keyword="webcompat:contact-complete">Contact Complete
    </select>

    <label for="outreach-assignee">Assignee</label>
    <ul class="input-list-inline">
      <li><input id="outreach-assignee" data-serialize-options="no-default">
      <li><button id="outreach-assign-me">Assign me</button>
    </ul>

    <label for="outreach-last-contacted">Last Contacted</label>
    <ul class="input-list-inline">
      <li><input type="date" id="outreach-contact-date" data-serialize-options="no-default">
      <li><button id="outreach-contact-date-today">Set to today</button>
    </ul>

    <label for="outreach-last-response">Last Response</label>
    <ul class="input-list-inline">
      <li><label>Have response<input type=checkbox id="outreach-have-response"></label>
      <li><input type="date" id="outreach-response-date" data-serialize-options="no-default">
      <li><button id="outreach-response-date-today">Set to today</button>
    </ul>

    <label for="outreach-reference">Details URL</label>
    <input id="outreach-reference" data-serialize-options="no-default">
  </div>

  <div class="actions">
    <p><a target="_blank" href="https://docs.google.com/document/d/1RFoVLiTGXQIbe3XZlyAkczmqlVI4NGc8TEIHdKB7-DM/edit#heading=h.85wx30ovvpn1">Triage Help</a></p>
    <button id="outreach-reset">Reset</button>
    <button class="primary" id="outreach-update-bug">Update Bug</button>
  </div>
</section>

<section id="platform-form" hidden>
  <div class="form">
    <label for="platform-scheduled">Scheduled Date</label>
    <ul class="input-list-inline">
      <li><input type="date" id="platform-scheduled">
    </ul>
  </div>

  <div class="actions">
    <button id="platform-reset">Reset</button>
    <button class="primary" id="platform-update-bug">Update Bug</button>
  </div>
</section>

<section id="error" hidden>
<p id="error-message">Unknown error</p>
</section>
